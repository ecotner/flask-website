{% extends "sidebar_layout.html" %}
<!-- Head -->
{% block stylesheets %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/sidebar_style.css')}}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/blog_style.css')}}">
{% endblock %}
{% block head_scripts %}
    <script src="{{ url_for('static', filename='js/blog.js') }}"></script>
{% endblock %}

<!-- Sidebar -->
{% block sidebar_title %}Posts{% endblock %}
{% block sidebar_content %}
    {% for tag, posts in g.tag_to_posts.items() %}
        <li class="tag">
            <a onclick="toggleListExpand(this)" style="display: block;">
                <h3 class="tag-hx" style="color: {{ posts['color'] }}">
                    {{ tag }} ({{ posts['count'] }})
                    <span class="collapse-indicator">[+]</span>
                </h3>
            </a>
            <ul>
            {% for title, slug in zip(posts['title'], posts['slug']) %}
                <li>
                    <h4 class="post-hx">
                        <a href="{{ url_for('blog_post', slug=slug) }}">{{ title }}</a>
                    </h4>
                </li>
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
{% endblock %}

<!-- Main content -->
{% block content_text %}
    <div id="content-text">
        {% if posted_date %}<h5>Posted {{ posted_date }}</h5>{% endif %}
        {% if post_tags %}<h4>Tags: {{ post_tags|safe }}</h4>{% endif %}
        {{ content_text|markdown }}
        {% if is_submission %}
        <!-- Create submission button if previewing post -->
        <form>
            <button type="submit" formaction="{{ url_for('submit_post') }}" formmethod="POST">Publish</button>
        </form>
        {% endif %}
    </div>
{% endblock %}